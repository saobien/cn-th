<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>E-Learning | C√¥ng ngh·ªá & Tin h·ªçc</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen">
  <div class="container mx-auto p-6">
    <h1 class="text-3xl font-bold mb-6 text-center">üìò E-Learning M√¥n h·ªçc</h1>

    <!-- Form th√™m m√¥n -->
    <div class="bg-white p-4 rounded-2xl shadow mb-6">
      <h2 class="text-xl font-semibold mb-2">Th√™m m√¥n h·ªçc</h2>
      <input id="subjectName" type="text" placeholder="T√™n m√¥n (VD: CN10 | C√°nh Di·ªÅu)" 
             class="border p-2 rounded w-2/3">
      <button onclick="addSubject()" 
              class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
        ‚ûï Th√™m m√¥n
      </button>
    </div>

    <!-- Danh s√°ch m√¥n -->
    <div id="subjectsList" class="space-y-6"></div>
  </div>

  <script>
  let subjects = [];

  // L∆∞u d·ªØ li·ªáu v√†o localStorage
  function saveData() {
    localStorage.setItem("subjects", JSON.stringify(subjects));
  }

  // Load d·ªØ li·ªáu t·ª´ localStorage
  function loadData() {
    const data = localStorage.getItem("subjects");
    if (data) {
      subjects = JSON.parse(data);
    } else {
      // d·ªØ li·ªáu m·∫∑c ƒë·ªãnh n·∫øu l·∫ßn ƒë·∫ßu v√†o web
      subjects = [
        { name: "CN10 | C√°nh Di·ªÅu", lessons: ["CN10_CD_BAI1", "CN10_CD_BAI2", "CN10_CD_BAI3"] },
        { name: "TIN10 | KNTT", lessons: ["TIN10_KNTT_BAI1", "TIN10_KNTT_BAI2", "TIN10_KNTT_BAI7"] }
      ];
    }
    renderSubjects();
  }

  // Render to√†n b·ªô m√¥n
  function renderSubjects() {
    const list = document.getElementById("subjectsList");
    list.innerHTML = "";
    subjects.forEach((subj, subjIndex) => {
      const subjDiv = document.createElement("div");
      subjDiv.className = "bg-white p-4 rounded-2xl shadow";

      subjDiv.innerHTML = `
        <div class="flex justify-between items-center mb-2">
          <h2 class="text-2xl font-bold">${subj.name}</h2>
          <div>
            <button onclick="editSubject(${subjIndex})" 
              class="text-yellow-500 font-semibold mr-2">‚úèÔ∏è S·ª≠a</button>
            <button onclick="deleteSubject(${subjIndex})" 
              class="text-red-500 font-semibold">üóëÔ∏è Xo√°</button>
          </div>
        </div>
        <ul id="lessons-${subjIndex}" class="list-disc ml-6 space-y-1">
          ${subj.lessons.map((lesson, i) => `
            <li>
              <a href="${lesson}/res/index.html" class="text-blue-600 underline" target="_blank">${lesson}</a>
              <button onclick="editLesson(${subjIndex}, ${i})" class="text-yellow-500 ml-2">‚úèÔ∏è</button>
              <button onclick="deleteLesson(${subjIndex}, ${i})" class="text-red-500 ml-1">üóëÔ∏è</button>
            </li>
          `).join("")}
        </ul>
        <div class="mt-3">
          <input id="lessonName-${subjIndex}" type="text" placeholder="T√™n b√†i (VD: CN10_BAI1)" 
                 class="border p-2 rounded w-2/3">
          <button onclick="addLesson(${subjIndex})" 
            class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">
            ‚ûï Th√™m b√†i
          </button>
        </div>
      `;
      list.appendChild(subjDiv);
    });
    saveData();
  }

  function addSubject() {
    const name = document.getElementById("subjectName").value.trim();
    if (name) {
      subjects.push({ name, lessons: [] });
      document.getElementById("subjectName").value = "";
      renderSubjects();
    }
  }

  function editSubject(index) {
    const newName = prompt("Nh·∫≠p t√™n m√¥n m·ªõi:", subjects[index].name);
    if (newName) {
      subjects[index].name = newName;
      renderSubjects();
    }
  }

  function deleteSubject(index) {
    if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën xo√° m√¥n n√†y?")) {
      subjects.splice(index, 1);
      renderSubjects();
    }
  }

  function addLesson(subjIndex) {
    const input = document.getElementById(`lessonName-${subjIndex}`);
    const lessonName = input.value.trim();
    if (lessonName) {
      subjects[subjIndex].lessons.push(lessonName);
      input.value = "";
      renderSubjects();
    }
  }

  function editLesson(subjIndex, lessonIndex) {
    const newLesson = prompt("Nh·∫≠p t√™n b√†i m·ªõi:", subjects[subjIndex].lessons[lessonIndex]);
    if (newLesson) {
      subjects[subjIndex].lessons[lessonIndex] = newLesson;
      renderSubjects();
    }
  }

  function deleteLesson(subjIndex, lessonIndex) {
    if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën xo√° b√†i n√†y?")) {
      subjects[subjIndex].lessons.splice(lessonIndex, 1);
      renderSubjects();
    }
  }

  // Khi t·∫£i trang th√¨ load data
  loadData();
</script>

</body>
</html>
